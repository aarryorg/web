<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO Meta Tags -->
    <title>World Clock - Live Time Across Timezones</title>
    <meta name="description" content="A beautiful, single-page World Clock application to track the current time in multiple cities and timezones around the globe. Add and customize your own dashboard.">
    <meta name="keywords" content="world clock, timezone, live clock, time across world, single page app, productivity tool, search timezone">
    <meta name="author" content="Kaocher Ahmed">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts: Poppins -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: #0F0C29;  /* fallback for old browsers */
            background: -webkit-linear-gradient(to right, #24243E, #302B63, #0F0C29);  /* Chrome 10-25, Safari 5.1-6 */
            background: linear-gradient(to right, #24243E, #302B63, #0F0C29); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
        }
        
        .gradient-text {
            background: -webkit-linear-gradient(45deg, #89f7fe, #66a6ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Frosted glass effect for cards */
        .glass-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Subtle animation for clock cards */
        .clock-card-appear {
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }

        @keyframes popIn {
            0% {
                opacity: 0;
                transform: scale(0.8) translateY(20px);
            }
            100% {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }
        
        /* Custom scrollbar for search results */
        #search-results::-webkit-scrollbar {
            width: 8px;
        }
        #search-results::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.1);
        }
        #search-results::-webkit-scrollbar-thumb {
            background-color: #4b5563; /* gray-600 */
            border-radius: 4px;
        }
        #search-results::-webkit-scrollbar-thumb:hover {
            background-color: #6b7280; /* gray-500 */
        }
    </style>
</head>
<body class="text-gray-200">

    <div class="container mx-auto px-4 py-8 md:py-16 min-h-screen flex flex-col">
        <!-- Hero Section -->
        <header class="text-center mb-12 md:mb-16">
            <h1 class="text-5xl sm:text-7xl font-black gradient-text leading-tight">World Clock</h1>
            <p class="text-lg text-gray-400 mt-4 max-w-2xl mx-auto">Stay in sync with any timezone. Instantly search for and add live clocks for cities across the globe to your personal dashboard.</p>
        </header>

        <!-- User's Local Time -->
        <section class="text-center mb-12">
            <div class="glass-card inline-block py-4 px-8 rounded-xl shadow-lg">
                <p class="text-sm text-gray-400">Your Local Time</p>
                <p id="local-time" class="text-5xl font-bold text-white tracking-wider"></p>
            </div>
        </section>

        <!-- Add Clock Search -->
        <section id="search-container" class="mb-12 max-w-2xl mx-auto w-full relative">
            <div class="glass-card p-4 rounded-xl shadow-lg flex items-center gap-3 border-2 border-transparent focus-within:border-cyan-400 transition-colors">
                 <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                </svg>
                <input type="text" id="search-input" placeholder="Search for a city or timezone..." class="w-full bg-transparent text-white placeholder-gray-400 focus:outline-none text-lg">
            </div>
            <div id="search-results" class="absolute left-0 right-0 top-full mt-2 glass-card rounded-lg max-h-60 overflow-y-auto z-10 hidden shadow-2xl">
                <!-- Search results will be populated here -->
            </div>
        </section>

        <!-- Clock Grid -->
        <main id="clock-grid" class="flex-grow grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            <!-- Clocks will be dynamically inserted here -->
        </main>
        
        <!-- Content Section -->
        <section class="mt-16 text-center">
             <h2 class="text-3xl font-bold text-white mb-4">Your Time, Anywhere.</h2>
             <p class="max-w-3xl mx-auto text-gray-400">
                Whether you're coordinating with a team across continents, keeping in touch with family abroad, or simply curious about the time somewhere else, World Clock provides a beautiful and intuitive solution. Your dashboard is saved automatically in your browser.
             </p>
        </section>

        <footer class="w-full text-center p-6 text-sm text-gray-500 mt-12">
            <p class="mb-1">Designed & Developed by <a href="https://www.linkedin.com/in/kaocher/" target="_blank" rel="noopener noreferrer" class="font-semibold text-cyan-400 hover:underline">Kaocher Ahmed</a>.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const clockGrid = document.getElementById('clock-grid');
            const searchContainer = document.getElementById('search-container');
            const searchInput = document.getElementById('search-input');
            const searchResults = document.getElementById('search-results');
            const localTimeEl = document.getElementById('local-time');

            // Get a comprehensive list of IANA timezones from the browser
            const allTimezones = Intl.supportedValuesOf('timeZone');

            // --- State Management ---
            let clocks = JSON.parse(localStorage.getItem('worldClocks')) || ['America/New_York', 'Europe/London', 'Asia/Tokyo', 'Asia/Dhaka'];
            
            const saveClocks = () => {
                localStorage.setItem('worldClocks', JSON.stringify(clocks));
            };
            
            const addClock = (tz) => {
                if (tz && !clocks.includes(tz)) {
                    clocks.unshift(tz); // Add to the beginning of the list
                    saveClocks();
                    renderClocks();
                }
            };

            const renderClocks = () => {
                clockGrid.innerHTML = '';
                clocks.forEach(tz => {
                    const now = new Date();
                    
                    let timeFormatter, dateFormatter;
                    try {
                         timeFormatter = new Intl.DateTimeFormat('en-US', {
                            timeZone: tz, hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true,
                        });

                         dateFormatter = new Intl.DateTimeFormat('en-US', {
                            timeZone: tz, weekday: 'long', month: 'short', day: 'numeric',
                        });
                    } catch (e) {
                        console.error(`Invalid timezone: ${tz}`, e);
                        // Skip rendering this invalid clock card
                        return; 
                    }


                    const city = tz.split('/').pop().replace(/_/g, ' ');
                    const region = tz.split('/')[0].replace(/_/g, ' ');

                    const clockCard = document.createElement('div');
                    clockCard.className = 'clock-card-appear glass-card p-6 rounded-2xl flex flex-col shadow-lg';
                    
                    clockCard.innerHTML = `
                        <div class="flex-grow flex justify-between items-start">
                            <div>
                                <h2 class="text-xl font-bold text-white">${city}</h2>
                                <p class="text-sm text-gray-400">${region}</p>
                            </div>
                             <button class="text-gray-500 hover:text-red-400 transition-colors p-1 rounded-full delete-btn" data-timezone="${tz}" aria-label="Delete ${city} clock">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
                            </button>
                        </div>
                        <div class="text-right mt-4">
                            <p class="text-5xl font-bold text-white tracking-wider">${timeFormatter.format(now).replace(/:\d+ /, ' ')}</p>
                            <p class="text-sm text-gray-400 mt-1">${dateFormatter.format(now)}</p>
                        </div>
                    `;
                    
                    clockGrid.appendChild(clockCard);
                });
                
                // Add event listeners to the new delete buttons
                document.querySelectorAll('.delete-btn').forEach(button => {
                    button.addEventListener('click', (e) => {
                        e.stopPropagation(); // Prevent card from thinking it was clicked
                        const timezoneToDelete = button.dataset.timezone;
                        clocks = clocks.filter(clockTz => clockTz !== timezoneToDelete);
                        saveClocks();
                        renderClocks(); 
                    });
                });
            };
            
            // --- Live Update Function ---
            const updateTimes = () => {
                const now = new Date();
                document.querySelectorAll('#clock-grid > div').forEach((card, index) => {
                    const tz = clocks[index];
                    if (!tz) return;

                    let timeFormatter;
                     try {
                        timeFormatter = new Intl.DateTimeFormat('en-US', {
                            timeZone: tz, hour: '2-digit', minute: '2-digit', /*second: '2-digit',*/ hour12: true
                        });
                    } catch (e) {
                        return; // Skip update for invalid timezone
                    }

                    const timeEl = card.querySelector('.text-5xl');
                    if (timeEl) {
                         // Removing seconds from the main display for a cleaner look, as they update every second anyway.
                        timeEl.textContent = timeFormatter.format(now).replace(/:\d+ /, ' ');
                    }
                });
            }

            // --- Search Event Listeners ---
            searchInput.addEventListener('input', () => {
                const query = searchInput.value.trim().toLowerCase();
                searchResults.innerHTML = '';

                if (query.length < 2) { // Only search after 2 characters
                    searchResults.classList.add('hidden');
                    return;
                }

                const filtered = allTimezones.filter(tz => tz.toLowerCase().replace(/_/g, ' ').includes(query));
                
                if (filtered.length > 0) {
                    searchResults.classList.remove('hidden');
                    filtered.slice(0, 50).forEach(tz => { // Show max 50 results
                        const resultItem = document.createElement('div');
                        resultItem.className = 'px-4 py-3 hover:bg-gray-700/50 cursor-pointer transition-colors text-sm';
                        resultItem.textContent = tz.replace(/_/g, ' ');
                        resultItem.addEventListener('click', () => {
                            addClock(tz);
                            searchInput.value = '';
                            searchResults.classList.add('hidden');
                        });
                        searchResults.appendChild(resultItem);
                    });
                } else {
                    searchResults.classList.add('hidden');
                }
            });

            // Hide search results when clicking outside the search container
            document.addEventListener('click', (e) => {
                if (!searchContainer.contains(e.target)) {
                    searchResults.classList.add('hidden');
                }
            });

            // --- Function to update user's local time ---
            const updateLocalTime = () => {
                const now = new Date();
                const timeOptions = { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true };
                
                if(localTimeEl) localTimeEl.textContent = now.toLocaleTimeString('en-US', timeOptions);
            };

            // --- Initial Load & Interval ---
            updateLocalTime(); // Run local time update on load
            setInterval(updateLocalTime, 1000); // Update local time every second

            renderClocks(); 
            // I'm removing the seconds from the display for a cleaner look, so updating every second is less critical.
            // Let's update every 5 seconds to be efficient.
            setInterval(updateTimes, 5000); 
            // Run an immediate update on load
            updateTimes();
        });
    </script>
</body>
</html>

